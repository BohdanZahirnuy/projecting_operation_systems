@{
    ViewData["Title"] = "FoodDetail";
}

<div class="row" id="comment">
    <div id="foodInfo" class="col-4">
        <img id="foodImg" src="~/images/pizza.jpg">
        
    </div>
    <div class="col-8">
        <h1>@Model.Name</h1>
        <hr>
        <p><b>Category: </b>@Model.Category</p>
        <p><b>Components: </b>@Model.Componets</p>

        @if (Model.ExtraInfo != null)
        {
            <p><b>Extra information: </b>@Model.ExtraInfo</p>
        }
        <p><b>Weight: </b>@Model.Weight</p>
        <h3 style="color:crimson"><b>Price: </b>@Model.Price$</h3>
    </div>
</div>

@if (User.Identity.IsAuthenticated)
{
<div class="row" id=comment>
    <form name="test" method="post" asp-controller="Home" asp-action="Comment" class="col-12">
        <input name="FoodId" value="@Model.Id" style="visibility:hidden" />
        <p>
            Write a comment:<Br>
            <textarea name="Message" cols="40" rows="3" class="  form-control"></textarea>
        </p>
        <input type="submit" class="btn btn-primary mb-2" value="Send" style="float:right;">
    </form>
</div>
}
<hr style="border-color:black" />
@if (@Model.comments.Count == 0)
{

    <h3 class="text-center">There is no comments yet! You can be first!</h3>

}
else
{
    @foreach (CommentViewModel comment in @Model.comments)
    {
    <div class="row border border-secondary rounded" id="comment">
        <div class="col-7">

            <a href="" style="color: #b34700; font-weight:bold;">@comment.UserName</a>
        </div>
        <div class="col-4" style="font-size:0.7em;text-align: right;margin-top:0.5em;">published at: <label style="font-style:italic; color:red;">@comment.Date</label></div>
        @if (User.Identity.Name == comment.UserName)
        {
            <div class="col-1" style="margin-top: 0.5em;">
        
            @using (Html.BeginForm("Delete", "Home"))
            {
                <input name="postId" value="@Model.Id" style="visibility:hidden" type="hidden" />
                <input name="id" value="@comment.Id" style="visibility:hidden" type="hidden" />
                <input style=" float:right" type="submit"
                       class="btn btn-danger btn-xs"
                       value="Delete" />
            }
        </div>
        }
        <div class="col-12">
            <p style="font-size: 1.3em;">@Html.DisplayFor(modelItem => comment.Message)</p>
        </div>

       
    </div>
    }

}


